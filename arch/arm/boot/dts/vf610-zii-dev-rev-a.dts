/*
 * Copyright 2013 Freescale Semiconductor, Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 */

/dts-v1/;
#include "vf610-zii-dev.dtsi"

/ {
	model = "ZII VF610 Development Board, Rev A";
	compatible = "zii,vf610dev-a", "zii,vf610dev", "fsl,vf610";

	chosen {
		bootargs = "console=ttyLP0,115200n8";
		stdout-path = &uart0;
	};

	memory {
		reg = <0x80000000 0x8000000>;
	};

	gpio-leds {
		compatible = "gpio-leds";
		pinctrl-0 = <&pinctrl_leds_debug>;
		pinctrl-names = "default";

		debug_1 {
			label = "zii:green:debug1";
			gpios = <&gpio3 22 GPIO_ACTIVE_HIGH>;
		};
	};

	dsa@0 {
		compatible = "marvell,dsa";
		#address-cells = <2>;
		#size-cells = <0>;

		dsa,ethernet = <&fec1>;
		dsa,mii-bus = <&mdio1>;

		/* 6352 - Primary - 7 ports */
		switch0: switch@2 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <0x02 0>;
			eeprom-length = <512>;

			port@0 {
				reg = <0>;
				label = "lan0";
			};

			port@1 {
				reg = <1>;
				label = "lan1";
			};

			port@2 {
				reg = <2>;
				label = "lan2";
			};

			port@3 {
				reg = <3>;
				label = "lan3";
			};

			port@4 {
				reg = <4>;
				label = "lan4";
			};

			switch0port5: port@5 {
				reg = <5>;
				label = "dsa";
				phy-mode = "rgmii-txid";
				link = <&switch1port6
					&switch2port9>;
				fixed-link {
					speed = <1000>;
					full-duplex;
				};
			};

			port@6 {
				reg = <6>;
				label = "cpu";
				fixed-link {
					speed = <100>;
					full-duplex;
				};
			};

		};

		/* 6352 - Secondary - 7 ports */
		switch1: switch@0 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <0x04 1>;
			eeprom-length = <512>;

			port@0 {
				reg = <0>;
				label = "lan5";
			};

			port@1 {
				reg = <1>;
				label = "lan6";
			};

			port@2 {
				reg = <2>;
				label = "lan7";
			};

			port@3 {
				reg = <3>;
				label = "lan8";
			};

			switch1port4: port@4 {
				reg = <4>;
				label = "dsa";
				link = <&switch2port9>;
			};

			switch1port6: port@6 {
				reg = <6>;
				label = "dsa";
				phy-mode = "rgmii-txid";
				link = <&switch0port5>;
				fixed-link {
					speed = <1000>;
					full-duplex;
				};
			};
		};

		/* 6185 - 10 ports */
		switch2: switch@6 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <0x06 2>;

			port@1 {
				reg = <1>;
				label = "optical3";
				fixed-link {
					speed = <1000>;
					full-duplex;
				};
			};

			port@2 {
				reg = <2>;
				label = "optical4";
				fixed-link {
					speed = <1000>;
					full-duplex;
				};
			};

			switch2port9: port@9 {
				reg = <9>;
				label = "dsa";
				link = <&switch1port4
					&switch0port5>;
			};
		};
	};
};

&iomuxc {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c_mux_reset>;

	vf610-zii {
		pinctrl_leds_debug: pinctrl-leds-debug {
			fsl,pins = <
				 VF610_PAD_PTE13__GPIO_118	0x31c2
				 >;
		};
	};
};
